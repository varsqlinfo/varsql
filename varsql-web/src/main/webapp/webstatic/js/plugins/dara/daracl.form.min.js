/*!
* @daracl/form  v0.0.17
* Copyright 2023-2025 darainfo and other contributors; 
* Licensed MIT
*/
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Daracl.dateTimePicker")):"function"==typeof define&&define.amd?define(["Daracl.dateTimePicker"],t):"object"==typeof exports?exports.Daracl=t(require("Daracl.dateTimePicker")):(e.Daracl=e.Daracl||{},e.Daracl.form=t(e.Daracl.dateTimePicker))}(self,e=>(()=>{"use strict";var t={9:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importStar(i(47)),n=l.__importDefault(i(714)),a=i(673),r=i(181),o=i(913),d=l.__importDefault(i(347)),u=l.__importDefault(i(805)),c={style:{width:"100%",labelWidth:3,valueWidth:9,position:"left-right"},mode:"new",useTypeValue:!0,autoCreate:!0,notValidMessage:"This form is not valid.",fields:[]},f={},h="data-form-uid";let m=0;class p{constructor(e,t,i){var l;if(this.formValue={},this.changeMode=e=>{this.options.mode=e,this.formElement.setAttribute("data-df-mode",e)},this.resetForm=()=>{const e=this.fieldInfoMap.getAllFieldInfo();for(const t in e){const i=e[t].$instance;i&&"function"==typeof i.reset&&i.reset()}this.formValue={},this.conditionCheck()},this.resetField=e=>{this.fieldInfoMap.getFieldName(e).$instance.reset(),this.formValue[e]="",this.conditionCheck()},this.getFieldValue=e=>{const t=this.fieldInfoMap.getFieldName(e);return t?t.$instance.getValue():null},this.getValue=e=>this.fieldInfoMap.getAllFieldValue(this.formValue,e),this.getFormDataValue=e=>this.fieldInfoMap.getFormDataValue(this.formValue,e),this.setValue=(e,t)=>{!1!==t&&this.resetForm(),Object.keys(e).forEach(t=>{this._setFieldValue(t,e[t])}),this.conditionCheck()},this.setFieldValue=(e,t)=>{this._setFieldValue(e,t),this.conditionCheck()},this.setFieldItems=(e,t)=>{const i=this.fieldInfoMap.getFieldName(e);if(i)return i.$instance.setValueItems(t)},this.addField=e=>{this.options.fields.push(e),this.formTemplate.addRow(e),this.conditionCheck()},this.removeField=e=>{var t;const i=this.getFieldElement(e);null!=i&&(null===(t=i.closest(".df-row"))||void 0===t||t.remove()),this.fieldInfoMap.removeFieldInfo(e)},this.isValidForm=()=>this.validForm().length<1,this.validForm=()=>{let e=[],t=!1!==this.options.autoFocus,i=!0;const l=this.fieldInfoMap.getAllFieldInfo();for(const n in l){const a=l[n];let r=this.fieldInfoMap.getFieldValidation(a,t);!0!==r&&(t=!1,s.isGridType(a)?e=e.concat(r):(i&&(this.validTabCheck(a),i=!1),e.push(r)))}return e},this.isValidField=e=>{const t=this.fieldInfoMap.getFieldName(e);if(s.isUndefined(t))throw new Error(`Field name [${e}] not found`);const i=t.$instance;return!i||!0===i.valid()},this.getOptions=()=>this.options,this.destroy=()=>{this.formElement.className=this.orginFormStyleClass,this.formElement.replaceChildren();for(const e in this)s.hasOwnProp(this,e)&&(delete this[e],delete f[this.selector])},this.getFields=()=>this.options.fields,this.setFields=e=>{this.options.fields=e,this.createForm(e)},this.options=s.merge({},c,t),n.default.set(i),!e)throw new Error(`${e} form selector not found`);this.orginFormStyleClass=e.className,e.classList.add("daracl-form"),this.selector="df_"+ ++m,e.setAttribute("name",this.selector),e.setAttribute(h,this.selector),this.options.style.width&&e.setAttribute("style",`width:${this.options.style.width};`),this.formElement=e,this.changeMode(null!==(l=this.options.mode)&&void 0!==l?l:"new"),this.createForm(this.options.fields),!1!==this.options.autoCreate&&(f[this.selector]=this)}static create(e,t,i){return new p(e,t,i)}static setMessage(e){n.default.set(e)}createForm(e){this.fieldInfoMap=new d.default(this.selector,this),this.formTemplate=new u.default(this,this.formElement,this.fieldInfoMap),!1!==this.options.autoCreate&&(e.forEach(e=>{this.formTemplate.addRow(e)}),this.conditionCheck(),this.options.onMounted&&this.options.onMounted.call(this))}getFieldElement(e){const t=this.fieldInfoMap.getFieldName(e);return(null==t?void 0:t.$instance)?t.$instance.getElement():null}getField(e){return this.fieldInfoMap.getFieldName(e)}_setFieldValue(e,t){this.formValue[e]=t;const i=this.fieldInfoMap.getFieldName(e);i&&i.$instance.setValue(t)}validTabCheck(e){e.$parent&&("tab"==e.$parent.renderType&&e.$parent.$instance.setActive(e.$key),this.validTabCheck(e.$parent))}conditionCheck(){this.fieldInfoMap.conditionCheck()}setFieldDisabled(e,t){this.fieldInfoMap.getFieldName(e).$instance.setDisabled(t)}setFieldDescription(e,t){this.fieldInfoMap.getFieldName(e).$instance.setDescription(t)}static instance(e){let t;t=s.isString(e)?document.querySelector(e):e;let i=t.getAttribute(h);if(s.isUndefined(i)||s.isBlank(i)){const e=Object.keys(f);if(e.length>1)throw new Error(`selector empty : [${i}]`);return i=e[0],f[i]}}getFieldInfoMap(){return this.fieldInfoMap}}p.VERSION="0.0.17",p.validator={string:(e,t)=>(0,a.stringValidator)(e,t),number:(e,t)=>(0,r.numberValidator)(e,t),regexp:(e,t)=>{let i={name:t.name,constraint:[]};return(0,o.regexpValidator)(e,t,i)}},t.default=p},22:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=i(675),a=l.__importDefault(i(9)),r=l.__importDefault(i(386)),o=l.__importStar(i(47));class d extends s.default{constructor(e,t,i){super(i,e,t),e.renderer?this.customFunction=e.renderer:this.customFunction={},this.mounted()}mounted(){this.customFunction.mounted&&this.customFunction.mounted.call(this,this.field,this.rowElement),this.tabContainerElement.querySelectorAll(".tab-item").forEach(e=>{e.addEventListener("click",t=>{this.clickEventHandler(e,t)})})}clickEventHandler(e,t){var i;this.setActive(null!==(i=e.getAttribute("data-tab-id"))&&void 0!==i?i:"")}setActive(e){var t,i,l,s;const n=this.tabContainerElement.querySelector(`[data-tab-id="${e}"]`);if(!n)return;if(!n.classList.contains("active")){for(let e of null!==(i=null===(t=null==n?void 0:n.parentElement)||void 0===t?void 0:t.children)&&void 0!==i?i:[])e.classList.remove("active");n.classList.add("active")}const a=this.rowElement.querySelector(`[tab-panel-id="${e}"]`);if(!(null==a?void 0:a.classList.contains("active"))){for(let e of null!==(s=null===(l=null==a?void 0:a.parentElement)||void 0===l?void 0:l.children)&&void 0!==s?s:[])e.classList.remove("active");null==a||a.classList.add("active")}}static isDataRender(){return!1}static isChildrenCreate(){return!1}createField(){var e,t,i,l,n,d;const u=this.field,c=this.daraForm.formTemplate,f=this.daraForm.getOptions(),h=this.rowElement.querySelector(".df-field-container");let m=r.default.fieldStyle(f,u);if(h.innerHTML=`\n        <div class="df-field ">\n          <div class="tab-header ${m.tabAlignClass}"></div>\n        </div>\n        <div class="df-tab-body"></div>\n    `,u.children){let f=!0;const m=this.getForm().getOptions();let p=r.default.fieldStyle(m,u,null,c.isLabelHide(u));for(const r of u.children){r.$parent=u,c.addRowFieldInfo(r);let v=r.$key,g=`<span class="tab-item ${f?"active":""}" data-tab-id="${v}"><a href="javascript:;">${r.label}</a></span>`,y=`<div class="tab-panel ${f?"active":""}" tab-panel-id="${v}">${s.default.getDescriptionTemplate(r)}\n          <div class="tab-group"></div>\n        </div>`;const E=o.templateToElement(g),b=o.templateToElement(y);if(f=!1,E&&(null===(e=h.querySelector(".tab-header"))||void 0===e||e.appendChild(E)),b&&(null===(t=h.querySelector(".df-tab-body"))||void 0===t||t.appendChild(b),r.children)){let e={style:{width:null!==(i=m.style.width)&&void 0!==i?i:"100%",labelWidth:null!==(l=m.style.labelWidth)&&void 0!==l?l:3,valueWidth:null!==(n=m.style.valueWidth)&&void 0!==n?n:9,position:null!==(d=m.style.position)&&void 0!==d?d:"left-right"},useTypeValue:m.useTypeValue,autoCreate:!1,notValidMessage:"This form is not valid.",fields:[]};r.$tabForm=new a.default(document.createElement("div"),e),r.$instance=new r.$renderType(r,null==b?void 0:b.querySelector(".tab-group"),r.$tabForm),r.$tabForm.formTemplate.childTemplate(r,p)}}this.tabContainerElement=h}}getValue(){var e;if(this.customFunction.getValue)return this.customFunction.getValue.call(this,this.field,this.rowElement);let t={},i=this.getForm().getOptions().useTypeValue;for(const l of this.field.children){const s=null===(e=l.$tabForm)||void 0===e?void 0:e.getValue(!1);if(i)t[l.$validName]=s;else for(let[e,i]of Object.entries(s))t[e]=i}return t}setValue(e){var t;for(const i of this.field.children){let l=e[i.$validName];l&&(null===(t=i.$tabForm)||void 0===t||t.setValue(l))}}reset(){}getElement(){return this.rowElement}valid(){var e;if(this.customFunction.valid){const e=this.customFunction.valid.call(this,this.field,this.rowElement);return void(0,n.invalidMessage)(this.field,this.rowElement,e)}const t=this.field;for(const i of t.children){const t=null===(e=i.$tabForm)||void 0===e?void 0:e.validForm();if(t&&t.length>0){const e=t[0];if(e.message)return e.message="["+this.field.label+"] "+e.message,e}}return!0}focus(){}}t.default=d},41:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.customChangeEventCall=t.dropdownChangeEvent=t.numberInputEvent=t.inputEvent=void 0;const l=i(635).__importStar(i(47));t.inputEvent=(e,i,l)=>{i.addEventListener("input",i=>{(0,t.customChangeEventCall)(e,i,l,l.getValue()),l.valid()})};t.numberInputEvent=(e,i,s)=>{i.addEventListener("keyup",n=>{const a=n.target.value;l.isNumber(a)||(i.value=a.replace(/[^0-9\.\-\+]/g,""),n.preventDefault()),(0,t.customChangeEventCall)(e,n,s,s.getValue()),s.valid()})};t.dropdownChangeEvent=(e,i,l)=>{i.addEventListener("change",i=>{(0,t.customChangeEventCall)(e,i,l,l.getValue()),l.valid()})};t.customChangeEventCall=(e,t,i,l)=>{i.changeEventCall(e,t,i,l)}},47:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.merge=t.templateToElement=t.isHiddenField=t.getHashCode=t.getXssFieldName=t.ignoreValueField=t.replaceXssField=t.isGridType=t.isTabType=t.isEmpty=t.isArray=t.isNumber=t.isString=t.isFunction=t.isUndefined=t.isBlank=t.unFieldName=t.unReplace=t.hasOwnProp=t.replaceXss=void 0,t.isPlainObject=l;const i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};t.replaceXss=e=>{let t=e;return t&&Object.keys(i).forEach(e=>{t=t.replaceAll(e,i[e])}),t};t.hasOwnProp=(e,t)=>e.hasOwnProperty(t);t.unReplace=e=>{let t=e;return t&&Object.keys(i).forEach(e=>{t=t.replaceAll(i[e],e)}),t};t.unFieldName=e=>e?(0,t.unReplace)(e).replaceAll('"','\\"'):"";t.isBlank=e=>null===e||(""===e||(void 0===e||"string"==typeof e&&(""===e||""===e.replace(/\s/g,""))));t.isUndefined=e=>void 0===e;t.isFunction=e=>"function"==typeof e;t.isString=e=>"string"==typeof e;t.isNumber=e=>!(0,t.isBlank)(e)&&(e=+e,!isNaN(e));t.isArray=e=>Array.isArray(e);t.isEmpty=e=>(0,t.isUndefined)(e)||null==e;t.isTabType=e=>e&&"tab"===e.renderType;t.isGridType=e=>e&&"grid"===e.renderType;t.replaceXssField=e=>(e.$xssName=(0,t.getXssFieldName)(e),e.label=(0,t.replaceXss)(e.label),e);t.ignoreValueField=e=>(0,t.isGridType)(e.$parent)||(0,t.isTabType)(e.$parent);t.getXssFieldName=e=>{if((0,t.isUndefined)(e.$xssName)){let t=e.name;return t&&Object.keys(i).forEach(e=>{t=t.replaceAll(e,"_")}),"df_"+t}return e.$xssName};t.getHashCode=e=>{let t=0;if(0==e.length)return t;for(let i=0;i<e.length;i++){t=(t<<5)-t+e.charCodeAt(i),t&=t}return String(t).replaceAll(/-/g,"_")};t.isHiddenField=e=>"hidden"===e.renderType;function l(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function s(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}t.templateToElement=e=>{const t=document.createElement("template");return t.innerHTML=e,t.content.firstElementChild};function n(e,i){return s(i)?function(e,i){if((0,t.isFunction)(i))return i;for(const l of Object.keys(i)){const a=i[l];(0,t.isUndefined)(a)||(null===a||(0,t.isFunction)(a)?e[l]=a:(0,t.isEmpty)(e[l])?e[l]=n((0,t.isArray)(a)?[]:{},a):s(a)?n(e[l],a):e[l]=a)}return e}(e,i):(0,t.isArray)(i)?function(e,i){const s=l(e);for(let l=0;l<i.length;l+=1){const a=i[l];let r;r=null==a?a:n((0,t.isArray)(a)?[]:{},a),s?e[l]=r:e.push(r)}return e}(e,i):(a=i)instanceof Date&&!isNaN(a.valueOf())?new i.constructor(i):i;var a}t.merge=(...e)=>{let i=e[0];if(!l(i)||(0,t.isEmpty)(i))return i;let s=1;Object.keys(i).length>0&&(s=0,i=(0,t.isArray)(i)?[]:{});const a=e.length;for(;s<a;s+=1)n(i,e[s]);return i}},60:(e,t,i)=>{i.r(t)},74:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validator=void 0;const l=i(635),s=i(913),n=l.__importStar(i(47));t.validator=(e,t,i)=>{if(t.validator&&(i.validator=t.validator(t,e),"object"==typeof i.validator))return i;if((i=(0,s.regexpValidator)(e,t,i)).regexp)return i;if(t.different){const e=t.different.field,l=t.$instance.getForm().getField(e);if(!n.isEmpty(l)&&t.$instance.getValue()==l.$instance.getValue())return i.message=t.different.message,i}if(t.identical){const e=t.identical.field,l=t.$instance.getForm().getField(e);if(!n.isEmpty(l)&&t.$instance.getValue()!=l.$instance.getValue())return i.message=t.identical.message,i}return!0}},129:(e,t,i)=>{const l=i(635).__importDefault(i(9));i(60),e.exports=l.default},181:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.numberValidator=void 0;const l=i(635),s=i(224),n=i(74),a=l.__importStar(i(47));t.numberValidator=(e,t)=>{if(!t.$instance.isEnableView())return!0;const i={name:t.name,constraint:[]},l=Number(e);if(t.required&&a.isBlank(e))return i.constraint.push(s.RULES.REQUIRED),i;if(!a.isNumber(e))return i.constraint.push(s.RULES.NAN),i;if(!0!==(0,n.validator)(e,t,i))return i;const r=t.rule;if(r){const e=a.isNumber(r.minimum),t=a.isNumber(r.maximum);let n=!1,o=!1,d=!1,u=!1;e&&(r.exclusiveMinimum&&l<=r.minimum?o=!0:l<r.minimum&&(n=!0)),t&&(r.exclusiveMaximum&&l>=r.maximum?u=!0:l>r.maximum&&(d=!0)),e&&t&&(n||o||d||u)?r.exclusiveMinimum&&r.exclusiveMaximum&&(o||u)?i.constraint.push(s.RULES.BETWEEN_EXCLUSIVE_MINMAX):o?i.constraint.push(s.RULES.BETWEEN_EXCLUSIVE_MIN):u?i.constraint.push(s.RULES.BETWEEN_EXCLUSIVE_MAX):i.constraint.push(s.RULES.BETWEEN):(o&&i.constraint.push(s.RULES.EXCLUSIVE_MIN),u&&i.constraint.push(s.RULES.EXCLUSIVE_MAX),n&&i.constraint.push(s.RULES.MIN),d&&i.constraint.push(s.RULES.MAX))}return!(i.constraint.length>0)||i}},188:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309)),s=i(673),n=i(675),a=i(41);class r extends l.default{constructor(e,t,i){super(i,e,t),this.mounted(),this.setDefaultOption(),this.setDefaultInfo()}mounted(){(0,a.inputEvent)(this.field,this.element,this)}createField(){const e=this.field,t=this.rowElement.querySelector(".df-field-container");t.innerHTML=`\n        <div class="df-field">\n            <input type="password" name="${e.$xssName}" class="form-field password help-icon" autocomplete="off" />\n        </div>\n        ${l.default.getDescriptionTemplate(e)}\n        <div class="help-message"></div>\n    `,this.element=t.querySelector(`[name="${e.$xssName}"]`)}getValue(){return this.element.value}setValue(e,t){!1===t||!1!==this.changeEventCall(this.field,null,this,e)?(this.field.$value=e,this.element.value=e):this.element.value=this.field.$value}reset(){this.setDefaultInfo(),this.setDisabled(!1),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=(0,s.stringValidator)(this.getValue(),this.field);return(0,n.invalidMessage)(this.field,this.rowElement,e),e}}t.default=r},224:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FIELD_POSITION_STYLE=t.ALIGN=t.RENDER_TEMPLATE=t.FIELD_PREFIX=t.RULES=void 0;const l=i(635),s=l.__importDefault(i(260)),n=l.__importDefault(i(891)),a=l.__importDefault(i(680)),r=l.__importDefault(i(734)),o=l.__importDefault(i(948)),d=l.__importDefault(i(442)),u=l.__importDefault(i(188)),c=l.__importDefault(i(559)),f=l.__importDefault(i(826)),h=l.__importDefault(i(890)),m=l.__importDefault(i(241)),p=l.__importDefault(i(753)),v=l.__importDefault(i(728)),g=l.__importDefault(i(905)),y=l.__importDefault(i(22)),E=l.__importDefault(i(757));t.RULES={NAN:"nan",MIN:"minimum",EXCLUSIVE_MIN:"exclusiveMinimum",MAX:"maximum",EXCLUSIVE_MAX:"exclusiveMaximum",MIN_LENGTH:"minLength",MAX_LENGTH:"maxLength",BETWEEN:"between",BETWEEN_EXCLUSIVE_MIN:"betweenExclusiveMin",BETWEEN_EXCLUSIVE_MAX:"betweenExclusiveMax",BETWEEN_EXCLUSIVE_MINMAX:"betweenExclusiveMinMax",REGEXP:"regexp",REQUIRED:"required",VALIDATOR:"validator"},t.FIELD_PREFIX="dff",t.RENDER_TEMPLATE={number:s.default,textarea:n.default,dropdown:a.default,checkbox:o.default,radio:d.default,text:r.default,password:u.default,file:c.default,custom:f.default,group:h.default,hidden:m.default,button:p.default,range:v.default,datehour:g.default,datemonth:g.default,date:g.default,datetime:g.default,tab:y.default,grid:E.default},t.ALIGN={left:"left",center:"center",right:"right"},t.FIELD_POSITION_STYLE={"top-left":["top","txt-left"],"top-center":["top","txt-center"],"top-right":["top","txt-right"],"left-left":["","txt-left"],"left-center":["","txt-center"],"left-right":["","txt-right"],"right-right":["right","txt-right"],"right-center":["right","txt-center"],"right-left":["right","txt-left"],"bottom-left":["bottom","txt-left"],"bottom-center":["bottom","txt-center"],"bottom-right":["bottom","txt-right"]},t.FIELD_POSITION_STYLE.top=t.FIELD_POSITION_STYLE["top-left"],t.FIELD_POSITION_STYLE.right=t.FIELD_POSITION_STYLE["right-right"],t.FIELD_POSITION_STYLE.left=t.FIELD_POSITION_STYLE["left-left"],t.FIELD_POSITION_STYLE.bottom=t.FIELD_POSITION_STYLE["bottom-left"]},241:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309));class s extends l.default{constructor(e,t,i){super(i,e,t),this.field.$value=e.defaultValue}mounted(){}createField(){return""}getValue(){return this.field.$value}setValue(e){this.field.$value=e}reset(){this.setValue(this.field.defaultValue)}getElement(){}valid(){return!0}}t.default=s},260:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309)),s=i(181),n=i(675),a=i(41);class r extends l.default{constructor(e,t,i){super(i,e,t),this.mounted(),this.setDefaultOption(),this.setDefaultInfo()}mounted(){(0,a.numberInputEvent)(this.field,this.element,this)}createField(){const e=this.field,t=this.rowElement.querySelector(".df-field-container");t.innerHTML=`\n        <div class="df-field">\n            <input type="text" name="${e.$xssName}" class="form-field number help-icon" />\n        </div> \n        ${l.default.getDescriptionTemplate(e)}\n        <div class="help-message"></div>\n       `,this.element=t.querySelector(`[name="${e.$xssName}"]`)}getValue(){return this.element.value}setValue(e,t){!1===t||!1!==this.changeEventCall(this.field,null,this,e)?(this.field.$value=e,this.element.value=e):this.element.value=this.field.$value}reset(){this.setDefaultInfo(),this.setDisabled(!1),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=(0,s.numberValidator)(this.getValue(),this.field);return(0,n.invalidMessage)(this.field,this.rowElement,e),e}}t.default=r},309:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importStar(i(47));class s{constructor(e,t,i){var l;this.enableView=!0,this.daraForm=e,this.field=t,this.rowElement=i,this.createField(),t.tooltip&&(null===(l=i.querySelector(".df-tooltip"))||void 0===l||l.setAttribute("tooltip",t.tooltip))}setDefaultInfo(){if(l.isUndefined(this.field.defaultValue)?this.setValue("",!1):this.setValue(this.field.defaultValue,!1),!l.isUndefined(this.field.placeholder)){const e=this.getElement();e instanceof Element&&e.setAttribute("placeholder",this.field.placeholder)}}setDefaultOption(){var e;this.setDisabled(null!==(e=this.field.disabled)&&void 0!==e&&e)}addChildField(e){var t;null===(t=this.rowElement.querySelector(".df-field-container"))||void 0===t||t.append(e)}static isDataRender(){return!0}static isChildrenCreate(){return!0}getForm(){return this.daraForm}setValueItems(e){}static getDescriptionTemplate(e){return e.description?`<div class="df-description">${e.description}</div>`:""}changeEventCall(e,t,i,n){var a;if(e.onChange){let r={field:e,evt:t,oldValue:e.$value,value:n};if(null===(a=e.listItem)||void 0===a?void 0:a.list){let t=[];const i=s.valuesValueKey(e);for(let s of e.listItem.list){let e=s[i];if(l.isString(n)){if(e==n){t.push(s);break}}else l.isArray(n)&&n.includes(e)&&t.push(s)}r.valueItems=t}if(r.oldValue!=r.value&&!1===e.onChange.call(null,r))return i.setValue(e.$value,!1),!1;e.$value=r.value}this.daraForm.conditionCheck()}focus(){this.getElement().focus()}isEnableView(){return this.enableView}show(){this.enableView=!0,this.rowElement.classList.remove("df-hidden")}hide(){this.enableView=!1,this.rowElement.classList.contains("df-hidden")||this.rowElement.classList.add("df-hidden")}setDescription(e){var t;const i=this.rowElement.querySelector(".df-description");if(i)i.innerHTML=e;else{const i=this.rowElement.querySelector(".df-field");if(i){const l=new DOMParser;this.field.description=e;const n=l.parseFromString(s.getDescriptionTemplate(this.field),"text/html").querySelector(".df-description");n&&(null===(t=i.parentNode)||void 0===t||t.insertBefore(n,i.nextSibling))}}}setActive(e){}setDisabled(e){this.getElement()instanceof HTMLElement&&(!1===e?this.getElement().removeAttribute("disabled"):this.getElement().setAttribute("disabled",!0))}commonValidator(){}static valuesValueKey(e){var t;return(null===(t=e.listItem)||void 0===t?void 0:t.valueField)?e.listItem.valueField:"value"}static valuesLabelKey(e){var t;return(null===(t=e.listItem)||void 0===t?void 0:t.labelField)?e.listItem.labelField:"label"}static valuesLabelValue(e,t){let i=!1;const l=e.replace(/\{\{([A-Za-z0-9_.]*)\}\}/g,(e,l)=>(i=!0,t[l]||""));return i?l:t[e]||""}}t.default=s},347:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=i(224),n=i(436),a=l.__importDefault(i(714)),r=l.__importStar(i(47));function o(e,t,i){if(r.ignoreValueField(t))return e;const l=t.$instance.getValue();if("file"===t.renderType){const i=l.uploadFile;e[t.$validName]=i,e[t.$validName+"RemoveIds"]=l.removeIds}else if(!0!==i)if(r.isTabType(t))for(let[t,i]of Object.entries(l))e[t]=i;else r.isEmpty(t.name)||(e[t.name]=l);else e[t.$validName]=l;return e}function d(e,t,i){if(r.ignoreValueField(t))return e;const l=t.$instance.getValue();if("file"===t.renderType){const i=l.uploadFile;e.delete(t.$validName);for(let l of i)e.append(t.$validName,l);e.set(t.$validName+"RemoveIds",l.removeIds)}else if(!0!==i)if(r.isTabType(t))for(let[t,i]of Object.entries(l))e.set(t,i);else r.isEmpty(t.name)||e.set(t.$validName,l);else e.set(t.$validName,l);return e}t.default=class{constructor(e,t){this.fieldIdx=0,this.allFieldInfo={},this.keyNameMap={},this.conditionFields=[],this.fieldPrefix=`${s.FIELD_PREFIX}_${r.getHashCode(e)}`,this.form=t}addField(e){var t;r.replaceXssField(e),this.fieldIdx+=1,e.$key=`${this.fieldPrefix}_${this.fieldIdx}`,e.$validName=null!==(t=e.name)&&void 0!==t?t:e.label,this.keyNameMap[e.$validName]=e.$key,this.allFieldInfo[e.$key]=e,e.$renderType=(0,n.getRenderer)(e),e.conditional&&this.conditionFields.push(e.$key)}getFieldName(e){return this.allFieldInfo[this.keyNameMap[e]]}get(e){return this.allFieldInfo[e]}hasFieldName(e){return!(!this.keyNameMap[e]||!this.allFieldInfo[this.keyNameMap[e]])}getAllFieldInfo(){return this.allFieldInfo}removeFieldInfo(e){delete this.allFieldInfo[this.keyNameMap[e]]}getAllFieldValue(e,t){const i=this.form.getOptions().useTypeValue;if(!0!==t){for(let[t,l]of Object.entries(this.allFieldInfo))e=o(e,l,i);return e}return new Promise((t,l)=>{for(let[t,s]of Object.entries(this.allFieldInfo)){if(!s.$instance.isEnableView())continue;let t=this.getFieldValidation(s,!0);if(!0!==t)return void l(new Error(t.message,{cause:t}));e=o(e,s,i)}t(e)})}getFormDataValue(e,t){if(!0!==t){let t=new FormData;for(let[i,l]of Object.entries(e))t.set(i,l);for(let[e,i]of Object.entries(this.allFieldInfo))d(t,i,i.$instance.getValue());return t}return new Promise((t,i)=>{let l=new FormData;for(let[t,i]of Object.entries(e))l.set(t,i);for(let[e,t]of Object.entries(this.allFieldInfo)){if(!t.$instance.isEnableView())continue;let e=this.getFieldValidation(t,!0);if(!0!==e)return void i(new Error(e.message,{cause:e}));d(l,t,t.$instance.getValue())}t(l)})}isConditionFieldCheck(e){let t=e;for(;void 0!==t;){if(!this.isConditionField(t))return!1;t=t.$parent}return!0}isConditionField(e){if(!this.conditionFields.includes(e.$key))return!0;let t=!1;if(e.conditional.custom)t=e.conditional.custom.call(null,e);else if(e.conditional.field){const i=this.getFieldName(e.conditional.field);i&&e.conditional.eq==i.$instance.getValue()&&(t=!0)}return t}conditionCheck(){this.conditionFields.forEach(e=>{const t=this.allFieldInfo[e];this.isConditionField(t)?t.$instance.show():t.$instance.hide()})}getFieldValidation(e,t){if(!this.isConditionFieldCheck(e))return!0;const i=e.$instance;let l=i.valid();return!0===l||(t&&i.focus(),r.isUndefined(l.message)&&(l.message=a.default.validMessage(e,l)[0]),l)}}},386:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importStar(i(47)),s=i(224);function n(e){return e.replace(/\s+/g," ").trim()}t.default={fieldStyle(e,t,i,a){var r,o,d,u,c,f,h,m,p,v,g,y,E,b,_,$;const w={rowStyleClass:"horizontal"===t.orientation?"horizontal":"vertical",fieldClass:"",fieldStyle:"",labelClass:"",labelStyle:"",labelAlignClass:"",valueClass:"",valueStyle:"",tabAlignClass:""},S=null!==(d=null!==(o=null===(r=null==i?void 0:i.style)||void 0===r?void 0:r.labelWidth)&&void 0!==o?o:e.style.labelWidth)&&void 0!==d?d:"3";let F=null!==(f=null!==(c=null===(u=null==i?void 0:i.style)||void 0===u?void 0:u.valueWidth)&&void 0!==c?c:e.style.valueWidth)&&void 0!==f?f:"9";const I=null!==(m=null===(h=null==i?void 0:i.style)||void 0===h?void 0:h.position)&&void 0!==m?m:e.style.position,V=null===(p=t.style)||void 0===p?void 0:p.width,T=null!==(y=null!==(g=s.FIELD_POSITION_STYLE[null===(v=t.style)||void 0===v?void 0:v.position])&&void 0!==g?g:s.FIELD_POSITION_STYLE[I])&&void 0!==y?y:s.FIELD_POSITION_STYLE.top;w.fieldClass=`${T[0]} ${(null===(E=t.style)||void 0===E?void 0:E.customClass)||""}`,V&&(l.isNumber(V)?w.fieldClass+=l.isNumber(V)?` col-xs-${V}`:"":w.fieldStyle=l.isNumber(V)?"":`width:${V};`),w.tabAlignClass="tab-al-"+(["right","center"].includes(null===(b=t.style)||void 0===b?void 0:b.tabAlign)?t.style.tabAlign:"left");const O=(null===(_=t.style)||void 0===_?void 0:_.labelWidth)||S;if(w.labelAlignClass=T[1],!a&&O&&!["top","bottom"].includes(T[0]))if(l.isNumber(O)){const e=+O;F=12-e,w.labelClass=`col-xs-${e}`,w.valueClass=w.labelStyle?"col-full":`col-xs-${F}`}else w.labelStyle=`width:${O};`;const x=(null===($=t.style)||void 0===$?void 0:$.valueWidth)||F;return a&&!["left","right"].includes(T[0])?w.valueClass="col-full":x&&!["top","bottom"].includes(T[0])?l.isNumber(x)?w.valueClass=w.labelStyle?"col-full":`col-xs-${x}`:w.valueStyle=`width:${x};`:w.valueClass=w.labelStyle?"col-full":"",w.fieldClass=n(w.fieldClass),w.labelClass=n(w.labelClass),w.valueClass=n(w.valueClass),w}}},436:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getRenderer=void 0;const l=i(635),s=i(224),n=l.__importStar(i(47));t.getRenderer=e=>{let t;return e.renderType&&(t=s.RENDER_TEMPLATE[e.renderType]),!t||!1!==t.isDataRender()&&n.isUndefined(e.name)?n.isUndefined(e.name)?e.children?s.RENDER_TEMPLATE.group:s.RENDER_TEMPLATE.hidden:s.RENDER_TEMPLATE.text:t}},442:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=i(224),a=i(675),r=i(41),o=l.__importStar(i(47));class d extends s.default{constructor(e,t,i){var l,s,n,a,r;super(i,e,t),this.defaultCheckValue="";let u=[];o.isUndefined(e.defaultValue)||(u=e.defaultValue);const c=d.valuesValueKey(e);let f=!1;null===(s=null===(l=this.field.listItem)||void 0===l?void 0:l.list)||void 0===s||s.forEach(e=>{let t=e[c];e.selected&&(this.defaultCheckValue=t),u==t&&(f=!0)}),f?this.defaultCheckValue=u:this.defaultCheckValue||(this.defaultCheckValue=(null===(a=null===(n=this.field.listItem)||void 0===n?void 0:n.list)||void 0===a?void 0:a.length)>0?null===(r=this.field.listItem)||void 0===r?void 0:r.list[0][c]:""),this.mounted(),this.setDefaultOption(),this.setValue(this.defaultCheckValue,!1)}mounted(){this.initEvent()}initEvent(){this.rowElement.querySelectorAll(this.getSelector()).forEach(e=>{e.addEventListener("change",e=>{(0,r.customChangeEventCall)(this.field,e,this,this.getValue()),this.valid()})})}getSelector(){return`input[type="radio"][name="${this.field.$xssName}"]`}createField(){var e,t;const i=this.field,l=this.rowElement.querySelector(".df-field-container"),n=[],a=i.$xssName,r=s.default.valuesLabelKey(i),o=s.default.valuesValueKey(i);n.push('<div class="df-field"><div class="field-group">'),null===(t=null===(e=i.listItem)||void 0===e?void 0:e.list)||void 0===t||t.forEach(e=>{const t=e[o];n.push(`<span class="field ${"vertical"==i.orientation?"vertical":"horizontal"}">\n        <label>\n            <input type="radio" name="${a}" value="${t}" class="form-field radio" ${e.selected?"checked":""} ${e.disabled?"disabled":""}/>\n            ${s.default.valuesLabelValue(r,e)}\n        </label>\n        </span>\n                `)}),n.push(`<i class="daracl-icon help-icon"></i></div></div>\n        ${s.default.getDescriptionTemplate(i)}\n     <div class="help-message"></div>\n    `),l.innerHTML=n.join(""),this.initEvent()}setValueItems(e){if(this.rowElement.querySelector(".df-field-container")&&(this.field.listItem?this.field.listItem.list=e:this.field.listItem={list:e},this.createField(),!o.isBlank(this.field.$value))){const e=this.field.$value;this.field.$value="",this.setValue(e)}}getValue(){var e;return null===(e=this.rowElement.querySelector(`[name="${this.field.$xssName}"]:checked`))||void 0===e?void 0:e.value}setValue(e,t){if(!1!==t&&!1===this.changeEventCall(this.field,null,this,e)&&(e=this.field.$value),this.field.$value=e,!0===e)return void(this.rowElement.querySelector(`[name="${this.field.$xssName}"]`).checked=!0);if(!1===e)return void(this.rowElement.querySelector(`[name="${this.field.$xssName}"]`).checked=!1);this.rowElement.querySelectorAll(this.getSelector()).forEach(t=>{let i=t;i.value==e?i.checked=!0:i.checked=!1})}reset(){this.setValue(this.defaultCheckValue,!1),this.setDisabled(!1),(0,a.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.rowElement.querySelectorAll(this.getSelector())}focus(){const e=this.getElement();e&&e.length>0&&this.getElement()[0].focus()}valid(){const e=this.getValue();let t=!0;return this.field.required&&o.isBlank(e)&&(t={name:this.field.name,constraint:[]},t.constraint.push(n.RULES.REQUIRED)),(0,a.invalidMessage)(this.field,this.rowElement,t),t}}t.default=d},556:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fileValidator=void 0;const l=i(224);t.fileValidator=(e,t,i)=>{const s={name:t.name,constraint:[]};return t.required&&i.length<1?(s.constraint.push(l.RULES.REQUIRED),s):!(s.constraint.length>0)||s}},559:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=i(675),a=i(556),r=l.__importDefault(i(714)),o=i(41),d=l.__importStar(i(47));class u extends s.default{constructor(e,t,i){var l;super(i,e,t),this.removeIds=[],this.uploadFiles={},this.fileList=[],this.fileSeq=0,this.element=t.querySelector(`[name="${e.$xssName}"]`),this.fileList=(null===(l=e.listItem)||void 0===l?void 0:l.list)||[],this.mounted(),this.setDefaultOption()}mounted(){this.element.addEventListener("change",e=>{var t;const i=null===(t=e.target)||void 0===t?void 0:t.files;if(i){let e=[];for(let t of i)e.push(t);this.addFiles(e)}(0,o.customChangeEventCall)(this.field,e,this,this.fileList),this.valid()}),this.fileList.forEach(e=>{e.$seq=this.fileSeq+=1}),this.setFileList(this.fileList)}createField(){const e=this.field,t=this.rowElement.querySelector(".df-field-container");t.innerHTML=`\n    <div class="df-field">\n      <span class="file-wrapper">\n        <label class="file-label">\n          <input type="file" name="${e.$xssName}" class="form-field file" multiple />\n          ${r.default.getMessage("fileButton")}\n        </label>\n        <i class="daracl-icon help-icon"></i>\n      </span>\n    </div>\n    ${s.default.getDescriptionTemplate(e)}\n    <div class="daracl-file-list"></div>\n    <div class="help-message"></div>\n    `,this.element=t.querySelector(`[name="${e.$xssName}"]`)}addFiles(e){let t=!1;const i=[];for(let l of e){if(this.fileList.filter(e=>e.fileName==l.name&&e.fileSize==l.size&&e.lastModified==l.lastModified).length>0)continue;this.fileSeq+=1,this.uploadFiles[this.fileSeq]=l;let e={fileName:l.name,$seq:this.fileSeq,fileSize:l.size,lastModified:l.lastModified};i.push(e),t=!0}t&&(this.setFileList(i),this.fileList.push(...i))}setFileList(e,t){const i=this.rowElement.querySelector(".daracl-file-list");if(i){!0===t&&(i.innerHTML="");const l=[];e.forEach(e=>{l.push(`\n        <div class="file-item" data-seq="${e.$seq}">\n          ${e.fileId?'<span class="file-icon download"></span>':'<span class="file-icon"></span>'} <span class="file-icon remove"></span>\n          <span class="file-name">${e.fileName}</span > \n        </div>`)}),i.insertAdjacentHTML("beforeend",l.join("")),e.forEach(e=>{this.removeFileEvent(e,i),this.downloadFileEvent(e,i)})}}downloadFileEvent(e,t){const i=t.querySelector(`[data-seq="${e.$seq}"] .download`);i&&i.addEventListener("click",e=>{const t=e.target.closest(".file-item");if(t){const e=t.getAttribute("data-seq");if(e){const t=parseInt(e,10),i=this.fileList.findIndex(e=>e.$seq===t),l=this.fileList[i];if(l.url)return void(location.href=l.url);if(this.field.fileDownload)return void this.field.fileDownload.call(null,{file:l,field:this.field})}}})}removeFileEvent(e,t){const i=t.querySelector(`[data-seq="${e.$seq}"] .remove`);i&&i.addEventListener("click",e=>{const t=e.target.closest(".file-item");if(t){const e=t.getAttribute("data-seq");if(e){const i=parseInt(e,10),l=this.fileList.findIndex(e=>e.$seq===i),s=this.fileList[l];this.fileList.splice(l,1),delete this.uploadFiles[i],t.remove(),s.fileId&&this.removeIds.push(s.fileId)}}this.valid()})}getValue(){return{uploadFile:Object.values(this.uploadFiles),removeIds:this.removeIds}}setValueItems(e){this.fileList=[],this.uploadFiles=[],this.removeIds=[];for(let t of e)t.$seq=this.fileSeq+=1,this.fileList.push(t);this.setFileList(this.fileList,!0)}setValue(e){d.isArray(e)&&this.setValueItems(e),this.element.value=""}reset(){this.setValue(""),this.setValueItems([]),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=(0,a.fileValidator)(this.element,this.field,this.fileList);return(0,n.invalidMessage)(this.field,this.rowElement,e),e}}t.default=u},635:(e,t,i)=>{i.r(t),i.d(t,{__addDisposableResource:()=>N,__assign:()=>n,__asyncDelegator:()=>F,__asyncGenerator:()=>S,__asyncValues:()=>I,__await:()=>w,__awaiter:()=>m,__classPrivateFieldGet:()=>L,__classPrivateFieldIn:()=>C,__classPrivateFieldSet:()=>M,__createBinding:()=>v,__decorate:()=>r,__disposeResources:()=>A,__esDecorate:()=>d,__exportStar:()=>g,__extends:()=>s,__generator:()=>p,__importDefault:()=>D,__importStar:()=>x,__makeTemplateObject:()=>V,__metadata:()=>h,__param:()=>o,__propKey:()=>c,__read:()=>E,__rest:()=>a,__rewriteRelativeImportExtension:()=>j,__runInitializers:()=>u,__setFunctionName:()=>f,__spread:()=>b,__spreadArray:()=>$,__spreadArrays:()=>_,__values:()=>y,default:()=>P});var l=function(e,t){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},l(e,t)};function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}l(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)}var n=function(){return n=Object.assign||function(e){for(var t,i=1,l=arguments.length;i<l;i++)for(var s in t=arguments[i])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},n.apply(this,arguments)};function a(e,t){var i={};for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.indexOf(l)<0&&(i[l]=e[l]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(l=Object.getOwnPropertySymbols(e);s<l.length;s++)t.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(e,l[s])&&(i[l[s]]=e[l[s]])}return i}function r(e,t,i,l){var s,n=arguments.length,a=n<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,i):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,l);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(n<3?s(a):n>3?s(t,i,a):s(t,i))||a);return n>3&&a&&Object.defineProperty(t,i,a),a}function o(e,t){return function(i,l){t(i,l,e)}}function d(e,t,i,l,s,n){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var r,o=l.kind,d="getter"===o?"get":"setter"===o?"set":"value",u=!t&&e?l.static?e:e.prototype:null,c=t||(u?Object.getOwnPropertyDescriptor(u,l.name):{}),f=!1,h=i.length-1;h>=0;h--){var m={};for(var p in l)m[p]="access"===p?{}:l[p];for(var p in l.access)m.access[p]=l.access[p];m.addInitializer=function(e){if(f)throw new TypeError("Cannot add initializers after decoration has completed");n.push(a(e||null))};var v=(0,i[h])("accessor"===o?{get:c.get,set:c.set}:c[d],m);if("accessor"===o){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(r=a(v.get))&&(c.get=r),(r=a(v.set))&&(c.set=r),(r=a(v.init))&&s.unshift(r)}else(r=a(v))&&("field"===o?s.unshift(r):c[d]=r)}u&&Object.defineProperty(u,l.name,c),f=!0}function u(e,t,i){for(var l=arguments.length>2,s=0;s<t.length;s++)i=l?t[s].call(e,i):t[s].call(e);return l?i:void 0}function c(e){return"symbol"==typeof e?e:"".concat(e)}function f(e,t,i){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}function h(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function m(e,t,i,l){return new(i||(i=Promise))(function(s,n){function a(e){try{o(l.next(e))}catch(e){n(e)}}function r(e){try{o(l.throw(e))}catch(e){n(e)}}function o(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(a,r)}o((l=l.apply(e,t||[])).next())})}function p(e,t){var i,l,s,n={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=r(0),a.throw=r(1),a.return=r(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function r(r){return function(o){return function(r){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,r[0]&&(n=0)),n;)try{if(i=1,l&&(s=2&r[0]?l.return:r[0]?l.throw||((s=l.return)&&s.call(l),0):l.next)&&!(s=s.call(l,r[1])).done)return s;switch(l=0,s&&(r=[2&r[0],s.value]),r[0]){case 0:case 1:s=r;break;case 4:return n.label++,{value:r[1],done:!1};case 5:n.label++,l=r[1],r=[0];continue;case 7:r=n.ops.pop(),n.trys.pop();continue;default:if(!(s=n.trys,(s=s.length>0&&s[s.length-1])||6!==r[0]&&2!==r[0])){n=0;continue}if(3===r[0]&&(!s||r[1]>s[0]&&r[1]<s[3])){n.label=r[1];break}if(6===r[0]&&n.label<s[1]){n.label=s[1],s=r;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(r);break}s[2]&&n.ops.pop(),n.trys.pop();continue}r=t.call(e,n)}catch(e){r=[6,e],l=0}finally{i=s=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,o])}}}var v=Object.create?function(e,t,i,l){void 0===l&&(l=i);var s=Object.getOwnPropertyDescriptor(t,i);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,l,s)}:function(e,t,i,l){void 0===l&&(l=i),e[l]=t[i]};function g(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||v(t,e,i)}function y(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],l=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&l>=e.length&&(e=void 0),{value:e&&e[l++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(e,t){var i="function"==typeof Symbol&&e[Symbol.iterator];if(!i)return e;var l,s,n=i.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(l=n.next()).done;)a.push(l.value)}catch(e){s={error:e}}finally{try{l&&!l.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return a}function b(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(E(arguments[t]));return e}function _(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;var l=Array(e),s=0;for(t=0;t<i;t++)for(var n=arguments[t],a=0,r=n.length;a<r;a++,s++)l[s]=n[a];return l}function $(e,t,i){if(i||2===arguments.length)for(var l,s=0,n=t.length;s<n;s++)!l&&s in t||(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))}function w(e){return this instanceof w?(this.v=e,this):new w(e)}function S(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l,s=i.apply(e,t||[]),n=[];return l=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function(e){return function(t){return Promise.resolve(t).then(e,d)}}),l[Symbol.asyncIterator]=function(){return this},l;function a(e,t){s[e]&&(l[e]=function(t){return new Promise(function(i,l){n.push([e,t,i,l])>1||r(e,t)})},t&&(l[e]=t(l[e])))}function r(e,t){try{(i=s[e](t)).value instanceof w?Promise.resolve(i.value.v).then(o,d):u(n[0][2],i)}catch(e){u(n[0][3],e)}var i}function o(e){r("next",e)}function d(e){r("throw",e)}function u(e,t){e(t),n.shift(),n.length&&r(n[0][0],n[0][1])}}function F(e){var t,i;return t={},l("next"),l("throw",function(e){throw e}),l("return"),t[Symbol.iterator]=function(){return this},t;function l(l,s){t[l]=e[l]?function(t){return(i=!i)?{value:w(e[l](t)),done:!1}:s?s(t):t}:s}}function I(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=y(e),t={},l("next"),l("throw"),l("return"),t[Symbol.asyncIterator]=function(){return this},t);function l(i){t[i]=e[i]&&function(t){return new Promise(function(l,s){(function(e,t,i,l){Promise.resolve(l).then(function(t){e({value:t,done:i})},t)})(l,s,(t=e[i](t)).done,t.value)})}}}function V(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var T=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},O=function(e){return O=Object.getOwnPropertyNames||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[t.length]=i);return t},O(e)};function x(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i=O(e),l=0;l<i.length;l++)"default"!==i[l]&&v(t,e,i[l]);return T(t,e),t}function D(e){return e&&e.__esModule?e:{default:e}}function L(e,t,i,l){if("a"===i&&!l)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!l:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?l:"a"===i?l.call(e):l?l.value:t.get(e)}function M(e,t,i,l,s){if("m"===l)throw new TypeError("Private method is not writable");if("a"===l&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===l?s.call(e,i):s?s.value=i:t.set(e,i),i}function C(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function N(e,t,i){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var l,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");l=t[Symbol.asyncDispose]}if(void 0===l){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");l=t[Symbol.dispose],i&&(s=l)}if("function"!=typeof l)throw new TypeError("Object not disposable.");s&&(l=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:l,async:i})}else i&&e.stack.push({async:!0});return t}var R="function"==typeof SuppressedError?SuppressedError:function(e,t,i){var l=new Error(i);return l.name="SuppressedError",l.error=e,l.suppressed=t,l};function A(e){function t(t){e.error=e.hasError?new R(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var i,l=0;return function s(){for(;i=e.stack.pop();)try{if(!i.async&&1===l)return l=0,e.stack.push(i),Promise.resolve().then(s);if(i.dispose){var n=i.dispose.call(i.value);if(i.async)return l|=2,Promise.resolve(n).then(s,function(e){return t(e),s()})}else l|=1}catch(e){t(e)}if(1===l)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function j(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,i,l,s,n){return i?t?".jsx":".js":!l||s&&n?l+s+"."+n.toLowerCase()+"js":e}):e}const P={__extends:s,__assign:n,__rest:a,__decorate:r,__param:o,__esDecorate:d,__runInitializers:u,__propKey:c,__setFunctionName:f,__metadata:h,__awaiter:m,__generator:p,__createBinding:v,__exportStar:g,__values:y,__read:E,__spread:b,__spreadArrays:_,__spreadArray:$,__await:w,__asyncGenerator:S,__asyncDelegator:F,__asyncValues:I,__makeTemplateObject:V,__importStar:x,__importDefault:D,__classPrivateFieldGet:L,__classPrivateFieldSet:M,__classPrivateFieldIn:C,__addDisposableResource:N,__disposeResources:A,__rewriteRelativeImportExtension:j}},673:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.stringValidator=void 0;const l=i(635),s=i(224),n=l.__importStar(i(47)),a=i(74);t.stringValidator=(e,t)=>{if(!t.$instance.isEnableView())return!0;let i={name:t.name,constraint:[]};if(t.required&&n.isBlank(e))return i.constraint.push(s.RULES.REQUIRED),i;const l=(0,a.validator)(e,t,i);if(!0!==l)return l;const r=t.rule;if(r){const t=e.length,l=n.isNumber(r.minLength),a=n.isNumber(r.maxLength);let o=!1,d=!1;if(l&&t<r.minLength&&(o=!0),a&&t>r.maxLength&&(d=!0),l&&a&&(o||d)?i.constraint.push(s.RULES.BETWEEN):(o&&i.constraint.push(s.RULES.MIN_LENGTH),d&&i.constraint.push(s.RULES.MAX_LENGTH)),i.constraint.length>0)return i}return!0}},675:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetRowElementStyleClass=t.invalidMessage=void 0;const l=i(635).__importDefault(i(714));t.invalidMessage=(e,t,i)=>{if(!0===i){t.classList.remove("invalid"),t.classList.contains("valid")||t.classList.add("valid");const e=t.querySelector(".help-message");return void(e&&(e.innerHTML=""))}if(t.classList.remove("valid"),t.classList.contains("invalid")||t.classList.add("invalid"),!1!==i){const s=l.default.validMessage(e,i);i.message&&s.push(i.message);const n=t.querySelector(".help-message");if(n&&s.length>0){const e=[];s.forEach(t=>{e.push(`<div>${t}</div>`)}),n.innerHTML=e.join("")}}};t.resetRowElementStyleClass=e=>{e.classList.remove("invalid"),e.classList.remove("valid")}},680:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=i(224),a=i(675),r=i(41),o=l.__importStar(i(47)),d=l.__importDefault(i(714));class u extends s.default{constructor(e,t,i){var l,s,n,a,r;super(i,e,t);let d="";o.isUndefined(e.defaultValue)||(d=e.defaultValue);const c=u.valuesValueKey(e);let f=!1;null===(s=null===(l=this.field.listItem)||void 0===l?void 0:l.list)||void 0===s||s.forEach(e=>{let t=e[c];e.selected&&(this.defaultSelected=t),t==d&&(f=!0)}),f?this.defaultSelected=d:this.defaultSelected||!0===(null===(n=e.customOptions)||void 0===n?void 0:n.disableDefaultOption)&&(this.defaultSelected=(null===(r=null===(a=this.field.listItem)||void 0===a?void 0:a.list)||void 0===r?void 0:r.length)>0&&this.field.listItem.list[0][c]||""),o.isUndefined(this.defaultSelected)&&(this.defaultSelected=""),this.mounted(),this.setDefaultOption(),this.setValue(this.defaultSelected,!1)}mounted(){(0,r.dropdownChangeEvent)(this.field,this.element,this)}createField(){const e=this.field,t=this.rowElement.querySelector(".df-field-container");let i=` <div class="df-field"><select name="${e.$xssName}" class="form-field dropdown">\n          ${this.dropdownValuesTemplate(e)}\n          </select> <i class="help-icon"></i></div>\n                ${s.default.getDescriptionTemplate(e)}\n      <div class="help-message"></div>\n    `;t.innerHTML=i,this.element=t.querySelector(`[name="${e.$xssName}"]`)}setValueItems(e){if(this.field.listItem?this.field.listItem.list=e:this.field.listItem={list:e},this.element.innerHTML=this.dropdownValuesTemplate(this.field),!o.isBlank(this.field.$value)){const e=this.field.$value;this.field.$value="",this.setValue(e)}}getValue(){return this.element.value}setValue(e,t){!1===t||!1!==this.changeEventCall(this.field,null,this,e)?(this.field.$value=e,this.element.value=e):this.element.value=this.field.$value}reset(){this.setValue(this.defaultSelected,!1),this.setDisabled(!1),(0,a.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=this.getValue();let t=!0;return this.field.required&&e.length<1&&(t={name:this.field.name,constraint:[]},t.constraint.push(n.RULES.REQUIRED)),(0,a.invalidMessage)(this.field,this.rowElement,t),t}dropdownValuesTemplate(e){var t,i,l;const n=s.default.valuesLabelKey(e),a=s.default.valuesValueKey(e);let r="";return!0!==(null===(t=e.customOptions)||void 0===t?void 0:t.disableDefaultOption)&&(r+=`<option value="">${d.default.getMessage("selection")}</option>`),null===(l=null===(i=e.listItem)||void 0===i?void 0:i.list)||void 0===l||l.forEach(e=>{const t=`${e.selected?"selected":""} ${e.disabled?"disabled":""}`;o.isUndefined(e[a])&&e.label?r+=`<option value="${e.value||""}" ${t}>${e.label}</option>`:r+=`<option value="${e[a]}" ${t}>${s.default.valuesLabelValue(n,e)}</option>`}),r}}t.default=u},714:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(224);let s={required:"{label}  .",fileButton:"",selection:"",string:{minLength:"{minLength}   .",maxLength:"{maxLength}   .",between:"{minLength} ~ {maxLength}   ."},number:{nan:"   .",minimum:"{minimum}    ",exclusiveMinimum:"{minimum}   ",maximum:"{maximum}    ",exclusiveMaximum:"{maximum}   .",between:"{minimum}~{maximum}   .",betweenExclusiveMin:"{minimum}   {maximum}    ",betweenExclusiveMax:"{minimum}    {maximum}   ",betweenExclusiveMinMax:"{minimum}   {maximum}   "},regexp:{mobile:"   .",email:"  .",url:"URL  .",alpha:"   .","alpha-num":"    .",number:"   .",variable:"  .","number-char":",       .","upper-char":"     .","upper-char-special":",,      .","upper-char-special-number":",,,     ."}};function n(e,t){return e.replace(/\{{1,1}([A-Za-z0-9_.]*)\}{1,1}/g,(e,i)=>void 0!==t[i]?t[i]:e)}t.default=new class{constructor(){this.lang=s}set(e){this.lang=Object.assign({},s,e)}getMessage(e){return this.lang[e]}validMessage(e,t){var i;let s="",a=[];t.regexp&&(s=this.lang.regexp[t.regexp],a.push(s)),(null!==(i=t.constraint)&&void 0!==i?i:[]).forEach(t=>{t===l.RULES.REQUIRED&&(s=n(this.lang.required,e),a.push(s)),"number"==e.renderType||"range"==e.renderType?(s=this.lang.number[t],a.push(s)):(s=this.lang.string[t],a.push(s))});const r=[],o=Object.assign({},{name:e.name,label:e.label},e.rule);return a.forEach(e=>{e&&r.push(n(e,o))}),t.validator&&r.push(t.validator.message),r}}},728:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309)),s=i(181),n=i(675),a=i(41);class r extends l.default{constructor(e,t,i){super(i,e,t),this.rangeNumElement=t.querySelector(".range-num"),this.mounted(),this.setDefaultOption(),this.setDefaultInfo()}mounted(){this.element.addEventListener("input",e=>{this.rangeNumElement.innerHTML=e.target.value,this.element.setAttribute("title",e.target.value),(0,a.customChangeEventCall)(this.field,e,this,this.getValue()),this.valid()})}createField(){const e=this.field,t=this.rowElement.querySelector(".df-field-container");t.innerHTML=`\n        <div class="df-field">\n            <span class="range-num">${e.defaultValue?e.defaultValue:0}</span>\n            <input type="range" name="${e.$xssName}" class="form-field range help-icon" min="${e.rule.minimum}" max="${e.rule.maximum}"/>\n        </div> \n        ${l.default.getDescriptionTemplate(e)}\n        <div class="help-message"></div>\n       `,this.element=t.querySelector(`[name="${e.$xssName}"]`)}getValue(){return this.element.value}setValue(e,t){!1===t||!1!==this.changeEventCall(this.field,null,this,e)?(this.field.$value=e,this.element.value=e):this.element.value=this.field.$value}reset(){this.setDefaultInfo(),this.setDisabled(!1),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=(0,s.numberValidator)(this.getValue(),this.field);return(0,n.invalidMessage)(this.field,this.rowElement,e),e}}t.default=r},734:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309)),s=i(673),n=i(675),a=i(41);class r extends l.default{constructor(e,t,i){super(i,e,t),this.mounted(),this.setDefaultOption(),this.setDefaultInfo()}mounted(){(0,a.inputEvent)(this.field,this.element,this)}createField(){const e=this.field,t=this.rowElement.querySelector(".df-field-container");t.innerHTML=`\n      <div class="df-field">\n       <input type="text" name="${e.$xssName}" class="form-field text help-icon" />\n      </div>\n      ${l.default.getDescriptionTemplate(e)}\n      <div class="help-message"></div>\n      `,this.element=t.querySelector(`[name="${e.$xssName}"]`)}getValue(){return this.element.value}setValue(e,t){!1===t||!1!==this.changeEventCall(this.field,null,this,e)?(this.field.$value=e,this.element.value=e):this.element.value=this.field.$value}reset(){this.setDefaultInfo(),this.setDisabled(!1),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=(0,s.stringValidator)(this.getValue(),this.field);return(0,n.invalidMessage)(this.field,this.rowElement,e),e}}t.default=r},753:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309));class s extends l.default{constructor(e,t,i){super(i,e,t),this.mounted(),this.setDefaultOption()}mounted(){var e;null===(e=this.rowElement.querySelector(`#${this.field.$key}`))||void 0===e||e.addEventListener("click",e=>{this.field.onClick&&this.field.onClick.call(null,this.field)})}static isDataRender(){return!1}createField(){const e=this.field;this.rowElement.querySelector(".df-field-container").innerHTML=`\n      <button type="button" id="${e.$key}" class="df-btn">${e.label}</button> ${l.default.getDescriptionTemplate(e)}\n     `}getValue(){return""}setValue(e){}reset(){this.setDisabled(!1)}getElement(){return null}valid(){return!0}}t.default=s},754:t=>{t.exports=e},757:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=i(675),a=l.__importDefault(i(9)),r=l.__importStar(i(47)),o=l.__importDefault(i(386));let d=0;class u extends s.default{constructor(e,t,i){super(i,e,t),this.allAddRowInfo={},e.renderer?this.customFunction=e.renderer:this.customFunction={};this.gridForm=new a.default(document.createElement("div"),{style:{width:"100%",labelWidth:3,valueWidth:9,position:"left-right"},autoCreate:!1,notValidMessage:"This form is not valid.",fields:[]}),this.mounted(),this.setDefaultOption(),this.setDefaultInfo()}mounted(){var e;this.addRow(),this.customFunction.mounted&&this.customFunction.mounted.call(this,this.field,this.rowElement),null===(e=this.rowElement.querySelector(".df-grid-add-row-btn"))||void 0===e||e.addEventListener("click",e=>{this.addRow()})}static isDataRender(){return!1}static isChildrenCreate(){return!1}createField(){var e,t,i,l,s,n,a;const r=this.field,o=this.rowElement.querySelector(".df-field-container");let d=[],u=[],c=[];if(c.push(""),r.children){u.push("<colgroup>"),d.push("<tr>"),u.push('<col style="width:38px">'),d.push("<th>"),!0!==(null===(e=r.gridOptions)||void 0===e?void 0:e.disableAddButton)&&d.push('<button type="button" class="df-btn df-grid-add-row-btn" title="Add"><i class="df-icon df-add-icon"></i></button>'),d.push("</th>");for(const e of r.children)u.push(`<col style="width:${null!==(i=null===(t=e.style)||void 0===t?void 0:t.width)&&void 0!==i?i:"*"}">`),d.push(`<th class="df-grid-header">${e.label}</th>`);u.push("</colgroup>"),d.push("</tr>")}o.innerHTML=`\n    <div class="df-grid-field">\n      ${c.join("")}\n     <div class="df-grid-container ${null!==(s=null===(l=r.style)||void 0===l?void 0:l.position)&&void 0!==s?s:""}" style="height:${null!==(a=null===(n=r.gridOptions)||void 0===n?void 0:n.height)&&void 0!==a?a:"auto"};">\n        <table class="df-grid">${u.join("")}<thead>${d.join("")}</thead><tbody></tbody></table>\n     </div>\n     </div>\n     `}addRow(e){var t,i,l;let s=[];const n=this.daraForm.getOptions(),a=this.gridForm.formTemplate,u=this.field.$xssName;++d;let c=[];s.push('<tr class="grid-row">'),s.push("<td>"),!0!==(null===(t=this.field.gridOptions)||void 0===t?void 0:t.disableRemoveButton)&&s.push(`<button type="button" data-row-idx="${d}" class="df-btn df-grid-row-remove"><i class="df-icon df-remove-icon"></i></button>`),s.push("</td>");for(const e of this.field.children){let t=o.default.fieldStyle(n,e,null,!0),i=r.merge({},e);c.push(i),i.$orgin=e,i.name=i.name+"_"+d,i.$xssName=u+"_"+r.getXssFieldName(i),a.addRowFieldInfo(i),s.push(`<td id="${i.$xssName}"><div class="df-field-container ${i.required?"required":""} " style="${t.valueStyle}"></div></td>`)}s.push("</tr>"),this.allAddRowInfo[d]=c;const f=r.templateToElement(s.join(""));f&&(null===(i=this.rowElement.querySelector("tbody"))||void 0===i||i.append(f),null===(l=f.querySelector(".df-grid-row-remove"))||void 0===l||l.addEventListener("click",e=>{this.removeRow(e)})),e=null!=e?e:{};for(let t of c)t.$instance=new t.$renderType(t,null==f?void 0:f.querySelector(`#${t.$xssName}`),this.gridForm),e[t.$orgin.name]&&t.$instance.setValue(e[t.$orgin.name])}removeRow(e){var t,i;const l=e.target.closest("tr");if(l){if(1==(null===(t=l.parentElement)||void 0===t?void 0:t.childElementCount))return;let s=(null===(i=e.currentTarget)||void 0===i?void 0:i.getAttribute("data-row-idx"))||"-1";this.removeFieldInfo(s),l.remove()}}removeFieldInfo(e){let t=[];if(r.isEmpty(e)){for(let e in this.allAddRowInfo)t=t.concat(this.allAddRowInfo[e]);this.allAddRowInfo={}}else if(e){const i=parseInt(e,10);t=t.concat(this.allAddRowInfo[i]),delete this.allAddRowInfo[i]}for(let e of t)this.gridForm.getFieldInfoMap().removeFieldInfo(e.name)}allRemoveRow(){var e;null===(e=this.rowElement.querySelector("tbody"))||void 0===e||e.replaceChildren(),this.removeFieldInfo()}getValue(){if(this.customFunction.getValue)return this.customFunction.getValue.call(this,this.field,this.rowElement);let e=[];const t=this.field.children,i=t.length;for(let l in this.allAddRowInfo){const s=this.allAddRowInfo[l];let n={};for(let e=0;e<i;e++){n[t[e].name]=this.gridForm.getFieldValue(s[e].name)}e.push(n)}return e}setValue(e){this.field.$value=e;let t=[];Array.isArray(e)?t=e:r.isPlainObject(e)&&t.push(e),this.allRemoveRow();for(let e of t)this.addRow(e)}reset(){this.setDefaultInfo(),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.customFunction.getElement?this.customFunction.getElement.call(this,this.field,this.rowElement):null}valid(){if(this.customFunction.valid){const e=this.customFunction.valid.call(this,this.field,this.rowElement);return void(0,n.invalidMessage)(this.field,this.rowElement,e)}const e=this.gridForm.validForm();if(e.length>0){const t=e[0];if(t.message)return t.message="["+this.field.label+"] "+t.message,t}return!0}focus(){}}t.default=u},805:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importStar(i(47)),n=l.__importDefault(i(386));t.default=class{constructor(e,t,i){this.addRowFields=[],this.daraform=e,this.options=e.getOptions(),this.formElement=t,this.fieldInfoMap=i}addRow(e){this.checkHiddenField(e)||(this.addRowFields=[],this.addRowTemplate(e))}addRowTemplate(e){var t;let i=this.isLabelHide(e),l=n.default.fieldStyle(this.options,e,null,i);this.addRowFieldInfo(e);const a=s.templateToElement(`\n        <div class="df-row form-group ${l.fieldClass}" id="${e.$key}">\n          ${i?"":`<div class="df-label ${l.labelClass} ${l.labelAlignClass}" title="${null!==(t=e.label)&&void 0!==t?t:""}" style="${l.labelStyle}">${this.getLabelTemplate(e)}</div>`}\n\n          <div class="df-field-container ${l.valueClass} ${e.required?"required":""}" style="${l.valueStyle}"></div>\n        </div>\n    `);a&&(this.createField(e,a),this.formElement.append(a),e.children&&this.childTemplate(e,l))}createField(e,t){e.$instance=new e.$renderType(e,t,this.daraform)}childTemplate(e,t){var i,l;let a=null,r=!0,o=!1;if(!e.$renderType.isChildrenCreate())return;const d=document.createElement("div");d.classList.add("df-row",null!==(i=t.rowStyleClass)&&void 0!==i?i:"");let u=0;for(const i of e.children){if(s.isEmpty(i))throw new Error(`parent field :[${e.$validName}], children index ${u},  empty [${i}]`);if(i.$parent=e,++u,this.checkHiddenField(i))continue;this.addRowFieldInfo(i),r&&(a=i);let c,f=this.isLabelHide(i),h="";f?(c=n.default.fieldStyle(this.options,i,a,!o),h=o?`<span class="df-label empty ${c.labelClass}" style="${c.labelStyle}"></span>`:""):(c=n.default.fieldStyle(this.options,i,a,!1),h=`<span class="df-label ${c.labelClass} ${c.labelAlignClass}" title="${null!==(l=i.label)&&void 0!==l?l:""}" style="${c.labelStyle}">${this.getLabelTemplate(i)}</span>`);const m=s.templateToElement(`<div class="form-group ${c.fieldClass}" style="${c.fieldStyle}" id="${i.$key}">\n        ${h}\n        <span class="df-field-container ${c.valueClass} ${i.required?"required":""}" style="${c.valueStyle}"></span>\n      </div>`);m&&(this.createField(i,m),d.append(m),i.children&&this.childTemplate(i,i.children?c:t)),f||(o=!0),r=!1}e.$instance.addChildField(d)}getLabelTemplate(e){var t;const i=e.required?'<span class="required"></span>':"",l=s.isBlank(e.tooltip)?"":`<span class="df-tooltip">?<span class="tooltip">${e.tooltip}</span></span>`;return`${null!==(t=e.label)&&void 0!==t?t:""} ${l} ${i}`}isLabelHide(e){var t;return(null===(t=e.style)||void 0===t?void 0:t.labelHide)||s.isUndefined(e.label)}checkHiddenField(e){return!!s.isHiddenField(e)&&(this.fieldInfoMap.addField(e),e.$instance=new e.$renderType(e,null,this.daraform),!0)}addRowFieldInfo(e){if(!s.isBlank(e.name)&&this.fieldInfoMap.hasFieldName(e.name))throw new Error(`Duplicate field name "${e.name}"`);this.fieldInfoMap.addField(e),this.addRowFields.push(e.$key)}}},826:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=i(675),a=l.__importStar(i(47)),r=i(673);class o extends s.default{constructor(e,t,i){super(i,e,t),e.renderer?(this.customFunction=e.renderer,this.mounted(),this.setDefaultOption(),this.setDefaultInfo()):this.customFunction={}}mounted(){this.customFunction.mounted&&this.customFunction.mounted.call(this,this.field,this.rowElement)}static isDataRender(){return!1}createField(){const e=this.field,t=a.isEmpty(e.template)?"":a.isString(e.template)?e.template:e.template();this.rowElement.querySelector(".df-field-container").innerHTML=` <div class="df-field">\n        ${t}\n        </div>\n          ${s.default.getDescriptionTemplate(e)}\n        <div class="help-message"></div>`}getValue(){return this.customFunction.getValue?this.customFunction.getValue.call(this,this.field,this.rowElement):""}setValue(e,t){this.customFunction.setValue&&(!1!==t&&!1===this.changeEventCall(this.field,null,this,e)&&(e=this.field.$value),this.customFunction.setValue.call(this,e,this.field,this.rowElement)),this.field.$value=e}reset(){this.setDefaultInfo(),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.customFunction.getElement?this.customFunction.getElement.call(this,this.field,this.rowElement):null}valid(){if(this.customFunction.valid){const e=this.customFunction.valid.call(this,this.field,this.rowElement);return void(0,n.invalidMessage)(this.field,this.rowElement,e)}const e=(0,r.stringValidator)(this.getValue(),this.field);return(0,n.invalidMessage)(this.field,this.rowElement,e),e}focus(){this.customFunction.focus&&this.customFunction.focus.call(this,this.field,this.rowElement)}}t.default=o},890:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309));class s extends l.default{constructor(e,t,i){super(i,e,t)}mounted(){}static isDataRender(){return!1}createField(){return""}getValue(){return null}setValue(e){}reset(){}getElement(){return this.rowElement}valid(){return!0}addChildField(e){let t=this.rowElement.querySelector(".df-field-container");t?t.append(e):this.rowElement.append(e)}focus(){}}t.default=s},891:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635).__importDefault(i(309)),s=i(673),n=i(675),a=i(41);class r extends l.default{constructor(e,t,i){super(i,e,t),this.mounted(),this.setDefaultOption(),this.setDefaultInfo()}mounted(){(0,a.inputEvent)(this.field,this.element,this)}createField(){var e;const t=this.field,i=this.rowElement.querySelector(".df-field-container");let s=null===(e=t.customOptions)||void 0===e?void 0:e.rows;s=+s>0?s:3,i.innerHTML=`\n        <div class="df-field">\n            <textarea name="${t.$xssName}" rows="${s}" class="form-field textarea help-icon"></textarea>\n        </div> \n        ${l.default.getDescriptionTemplate(t)}\n        <div class="help-message"></div>\n    `,this.element=i.querySelector(`[name="${t.$xssName}"]`)}getValue(){return this.element.value}setValue(e,t){!1===t||!1!==this.changeEventCall(this.field,null,this,e)?(this.field.$value=e,this.element.value=e):this.element.value=this.field.$value}reset(){this.setDefaultInfo(),this.setDisabled(!1),(0,n.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=(0,s.stringValidator)(this.getValue(),this.field);return(0,n.invalidMessage)(this.field,this.rowElement,e),e}}t.default=r},905:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=i(673),a=i(675),r=l.__importDefault(i(754)),o=l.__importStar(i(47));class d extends s.default{constructor(e,t,i){super(i,e,t),this.mounted(),this.setDefaultOption(),this.setDefaultInfo()}mounted(){let e;this.field.customOptions=Object.assign({},this.field.customOptions),void 0!==this.field.customOptions.onSelect&&(e=typeof this.field.customOptions.onSelect),o.isUndefined(this.field.customOptions.mode)&&("datemonth"==this.field.renderType||"datehour"==this.field.renderType?this.field.customOptions.mode=this.field.renderType.replace("date",""):this.field.customOptions.mode=this.field.renderType),this.field.customOptions.onSelect=(t,i)=>{e&&e(t,i),this.setValue(t),this.valid()},this.dateObj=new r.default(this.element,this.field.customOptions,{})}createField(){const e=this.field,t=this.rowElement.querySelector(".df-field-container");t.innerHTML=`\n    <div class="df-field">\n      <input type="text" name="${e.$xssName}" class="form-field text help-icon" autocomplete="off" readonly/>\n     </div>\n     ${s.default.getDescriptionTemplate(e)}\n     <div class="help-message"></div>\n     `,this.element=t.querySelector(`[name="${e.$xssName}"]`)}getValue(){return this.element.value}setValue(e,t){!1===t||!1!==this.changeEventCall(this.field,null,this,e)?(this.field.$value=e,this.element.value=e):this.element.value=this.field.$value}reset(){this.setDefaultInfo(),this.setDisabled(!1),(0,a.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.element}valid(){const e=(0,n.stringValidator)(this.getValue(),this.field);return(0,a.invalidMessage)(this.field,this.rowElement,e),e}}t.default=d},913:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.regexpValidator=void 0;const i={mobile:/^\d{3}-\d{3,4}-\d{4}$/,email:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,url:/^(?:(?:https?|HTTPS?|ftp|FTP):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-zA-Z\u00a1-\uffff0-9]-*)*[a-zA-Z\u00a1-\uffff0-9]+)(?:\.(?:[a-zA-Z\u00a1-\uffff0-9]-*)*[a-zA-Z\u00a1-\uffff0-9]+)*(?:\.(?:[a-zA-Z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/,number:/\d$/,alpha:/^[a-zA-Z]+$/,"alpha-num":/^[a-zA-Z0-9]+$/,variable:/^[a-zA-Z0-9_$][a-zA-Z0-9_$]*$/,"number-char":/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]/,"upper-char":/^(?=.*?[A-Z])(?=.*?[a-z])/,"upper-char-special":/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[#?!@$%^&*-])/,"upper-char-special-number":/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&]/};t.regexpValidator=(e,t,l)=>{if(!t.$instance.isEnableView())return{name:t.name,constraint:[]};void 0===l&&(l={name:t.name,constraint:[]});const s=t.regexpType;return s&&!i[s].test(e)?(l.regexp=s,l):l}},948:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});const l=i(635),s=l.__importDefault(i(309)),n=l.__importStar(i(47)),a=i(224),r=i(675),o=i(41);class d extends s.default{constructor(e,t,i){var l,s;super(i,e,t),this.defaultCheckValue=[],this.defaultCheckValue=[];let a=[];n.isUndefined(e.defaultValue)||(a=n.isArray(e.defaultValue)?e.defaultValue:[e.defaultValue]);const r=d.valuesValueKey(e);n.isUndefined(this.field.listItem)&&this.setValueItems([{label:"",value:"Y"}]);let o=!1;null===(s=null===(l=this.field.listItem)||void 0===l?void 0:l.list)||void 0===s||s.forEach(e=>{let t=e[r];e.selected&&this.defaultCheckValue.push(t||!0),a.includes(t)&&(o=!0)}),this.defaultCheckValue=o?a:this.defaultCheckValue,this.mounted(),this.setDefaultOption(),this.setValue(this.defaultCheckValue,!1)}mounted(){this.initEvent()}initEvent(){this.rowElement.querySelectorAll(this.getSelector()).forEach(e=>{e.addEventListener("change",e=>{(0,o.customChangeEventCall)(this.field,e,this,this.getValue()),this.valid()})})}getSelector(){return`input[type="checkbox"][name="${this.field.$xssName}"]`}createField(){var e,t;const i=this.field,l=this.rowElement.querySelector(".df-field-container"),a=[],r=i.$xssName,o=s.default.valuesLabelKey(i),d=s.default.valuesValueKey(i);a.push(' <div class="df-field"><div class="field-group">'),null===(t=null===(e=i.listItem)||void 0===e?void 0:e.list)||void 0===t||t.forEach(e=>{const t=e[d];a.push(`\n          <span class="field ${"vertical"==i.listItem.orientation?"vertical":"horizontal"}">\n              <label>\n                  <input type="checkbox" name="${r}" value="${t?n.replaceXss(t):""}" class="form-field checkbox" ${e.selected?"checked":""} ${e.disabled?"disabled":""}  />\n                  ${s.default.valuesLabelValue(o,e)}\n              </label>\n          </span>\n      `)}),a.push(`<i class="daracl-icon help-icon"></i></div></div> ${s.default.getDescriptionTemplate(i)}<div class="help-message"></div>`),l.innerHTML=a.join("")}setValueItems(e){if(this.rowElement.querySelector(".df-field-container")&&(this.field.listItem?this.field.listItem.list=e:this.field.listItem={list:e},this.createField(),!n.isBlank(this.field.$value))){const e=this.field.$value;this.field.$value="",this.setValue(e)}}getValue(){const e=this.rowElement.querySelectorAll(this.getSelector());if(e.length>1){const t=[];return e.forEach(e=>{const i=e;i.checked&&t.push(i.value)}),t}{const e=this.rowElement.querySelector(`[name="${this.field.$xssName}"]`);return(null==e?void 0:e.checked)?!e.value||e.value:!!e.value&&""}}setValue(e,t){if(!1!==t&&!1===this.changeEventCall(this.field,null,this,e)&&(e=this.field.$value),this.field.$value=e,!0===e)return void(this.rowElement.querySelector(`[name="${this.field.$xssName}"]`).checked=!0);if(!1===e)return void(this.rowElement.querySelector(`[name="${this.field.$xssName}"]`).checked=!1);let i=[];Array.isArray(e)?i=e:i.push(e);this.rowElement.querySelectorAll(this.getSelector()).forEach(e=>{e.checked=!1}),i.forEach(e=>{const t=this.rowElement.querySelector(`[name="${this.field.$xssName}"][value="${e}"]`);t&&(t.checked=!0)})}reset(){var e,t;1==(null===(t=null===(e=this.field.listItem)||void 0===e?void 0:e.list)||void 0===t?void 0:t.length)&&1==this.defaultCheckValue.length?this.setValue(!0,!1):this.setValue(this.defaultCheckValue,!1),this.setDisabled(!1),(0,r.resetRowElementStyleClass)(this.rowElement)}getElement(){return this.rowElement.querySelectorAll(`[name="${this.field.$xssName}"]`)}focus(){const e=this.getElement();e&&e.length>0&&this.getElement()[0].focus()}valid(){const e=this.getValue();let t=!0;return this.field.required&&n.isArray(e)&&e.length<1&&(t={name:this.field.name,constraint:[]},t.constraint.push(a.RULES.REQUIRED)),(0,r.invalidMessage)(this.field,this.rowElement,t),t}}t.default=d}},i={};function l(e){var s=i[e];if(void 0!==s)return s.exports;var n=i[e]={exports:{}};return t[e](n,n.exports,l),n.exports}return l.d=(e,t)=>{for(var i in t)l.o(t,i)&&!l.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},l.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),l.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l(129)})());
//# sourceMappingURL=daracl.form.min.js.map